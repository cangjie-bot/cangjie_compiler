### 编译器插件设计的四个核心宗旨（示例）

- **1）用户插件开发体验友好**  
  - **目标**：让“写插件”尽可能接近“写普通业务代码”。  
  - **体现**：提供稳定清晰的抽象基类（如 `MetaTransform<CHIR::Func>`）、简洁的宏（如 `CHIR_PLUGIN`）、完善的文档和样例工程，避免复杂的注册流程和模板黑魔法，让业务工程师也能快速上手。

- **2）插件机制自演进友好（向前/向后兼容）**  
  - **目标**：编译器和插件可以各自演进，而不需要频繁同步重构。  
  - **体现**：通过版本号（如 `cjcVersion`）和明确的 ABI/API 契约进行兼容性管理；新增能力以“扩展字段 / 可选能力”的方式提供，尽量避免破坏既有接口；为旧插件提供清晰的降级或告警策略。

- **3）主线编译流程安全稳定（隔离第三方风险）**  
  - **目标**：无论插件质量如何，都不能拖垮编译器自身的稳定性。  
  - **体现**：动态库加载时严格校验符号和版本；执行阶段用 try/catch 包裹，异常统一转成诊断；提供 IRCheck 等“防火墙”，防止插件产出的非法 IR 进入后端；插件资源（句柄、内存）由编译器统一托管和回收。

- **4）扩展能力与生态友好（可组合、可复用、可治理）**  
  - **目标**：让插件生态可以规模化发展，而不是零散脚本堆积。  
  - **体现**：插件有清晰的作用粒度（函数级、包级、IR 级），可以按需组合执行；支持多插件顺序执行与配置化启停；为运维/治理提供可观测性（profile、日志、诊断 ID），方便在大规模工程中排查某个插件的性能或行为问题。


