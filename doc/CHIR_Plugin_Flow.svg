<?xml version="1.0" encoding="utf-8" ?>
<svg baseProfile="full" height="500px" version="1.1" width="1200px" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs /><rect fill="#08162D" height="500" width="1200" x="0" y="0" /><text fill="#F3F7FF" font-family="Microsoft YaHei, Arial" font-size="32" text-anchor="middle" x="600.0" y="60">CHIR 阶段插件执行流程</text><rect fill="#00A4FF" height="120" rx="16" ry="16" stroke="#F3F7FF" stroke-width="2" width="200" x="20.0" y="140" /><text fill="#181C28" font-family="Microsoft YaHei, Arial" font-size="18" font-weight="bold" text-anchor="middle" x="120.0" y="175">CHIR Builder 初始化</text><text fill="#181C28" font-family="Microsoft YaHei, Arial" font-size="14" text-anchor="middle" x="120.0" y="205">构建 CHIRPluginManager</text><text fill="#181C28" font-family="Microsoft YaHei, Arial" font-size="14" text-anchor="middle" x="120.0" y="225">ci.metaTransformPluginBuilder</text><line stroke="#00CEAD" stroke-dasharray="4,4" stroke-width="4" x1="225.0" x2="255.0" y1="200.0" y2="200.0" /><polygon fill="#00CEAD" points="255.0,200.0 245.0,192.0 245.0,208.0" /><rect fill="#9966FF" height="120" rx="16" ry="16" stroke="#F3F7FF" stroke-width="2" width="200" x="260.0" y="140" /><text fill="#181C28" font-family="Microsoft YaHei, Arial" font-size="18" font-weight="bold" text-anchor="middle" x="360.0" y="175">遍历插件概念</text><text fill="#181C28" font-family="Microsoft YaHei, Arial" font-size="14" text-anchor="middle" x="360.0" y="205">ForEachMetaTransformConcept</text><text fill="#181C28" font-family="Microsoft YaHei, Arial" font-size="14" text-anchor="middle" x="360.0" y="225">依次获取 MetaTransform</text><line stroke="#00CEAD" stroke-dasharray="4,4" stroke-width="4" x1="465.0" x2="495.0" y1="200.0" y2="200.0" /><polygon fill="#00CEAD" points="495.0,200.0 485.0,192.0 485.0,208.0" /><rect fill="#00CEAD" height="120" rx="16" ry="16" stroke="#F3F7FF" stroke-width="2" width="200" x="500.0" y="140" /><text fill="#181C28" font-family="Microsoft YaHei, Arial" font-size="18" font-weight="bold" text-anchor="middle" x="600.0" y="175">类别判定</text><text fill="#181C28" font-family="Microsoft YaHei, Arial" font-size="14" text-anchor="middle" x="600.0" y="205">IsForFunc / IsForPackage</text><text fill="#181C28" font-family="Microsoft YaHei, Arial" font-size="14" text-anchor="middle" x="600.0" y="225">决定针对函数或包</text><line stroke="#00CEAD" stroke-dasharray="4,4" stroke-width="4" x1="705.0" x2="735.0" y1="200.0" y2="200.0" /><polygon fill="#00CEAD" points="735.0,200.0 725.0,192.0 725.0,208.0" /><rect fill="#FFA95C" height="120" rx="16" ry="16" stroke="#F3F7FF" stroke-width="2" width="200" x="740.0" y="140" /><text fill="#181C28" font-family="Microsoft YaHei, Arial" font-size="18" font-weight="bold" text-anchor="middle" x="840.0" y="175">执行 Run</text><text fill="#181C28" font-family="Microsoft YaHei, Arial" font-size="14" text-anchor="middle" x="840.0" y="205">Func：遍历 package funcs</text><text fill="#181C28" font-family="Microsoft YaHei, Arial" font-size="14" text-anchor="middle" x="840.0" y="225">Package：直接运行</text><line stroke="#00CEAD" stroke-dasharray="4,4" stroke-width="4" x1="945.0" x2="975.0" y1="200.0" y2="200.0" /><polygon fill="#00CEAD" points="975.0,200.0 965.0,192.0 965.0,208.0" /><rect fill="#36C6FF" height="120" rx="16" ry="16" stroke="#F3F7FF" stroke-width="2" width="200" x="980.0" y="140" /><text fill="#181C28" font-family="Microsoft YaHei, Arial" font-size="18" font-weight="bold" text-anchor="middle" x="1080.0" y="175">质量保障</text><text fill="#181C28" font-family="Microsoft YaHei, Arial" font-size="14" text-anchor="middle" x="1080.0" y="205">Profile 记录</text><text fill="#181C28" font-family="Microsoft YaHei, Arial" font-size="14" text-anchor="middle" x="1080.0" y="225">异常诊断 + IRCheck</text><text fill="#F3F7FF" font-family="Microsoft YaHei, Arial" font-size="16" text-anchor="middle" x="600.0" y="440">异常：捕获后触发 plugin_throws_exception 诊断；成功并启用 IRCheck 时继续进行 IRCheck(package, opts, builder, Phase::PLUGIN)。</text></svg>